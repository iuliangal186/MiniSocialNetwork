
<div class="group-body">
    <div class="group-main">
        <h3 style="margin-top:10px">@Model.Name</h3>
    </div>
    <div class="group-info">
        <p>Created: @Model.CreatedAt.Date.ToString("yyyy-MM-dd")</p>
    </div>
    <div class="group-details">
        <h5 style="margin-top:5px">@Model.Details</h5>
    </div>
    <div class="group-buttons">
        @if (ViewBag.CurrentUserId != null && (Model.CreatorId == ViewBag.CurrentUserId || ViewBag.UserIsAdmin == true))
        {
            <a class="btn btn-sm btn-success" href="/Group/Edit/@Model.GroupId">Edit Group</a>
            <a id="deletebutton" class="btn btn-sm btn-danger" href="/Group/Delete/@Model.GroupId">Delete Group</a>
        } else if (!ViewBag.JoinedGroups.Contains(Model.GroupId))
        {
            <a id ="joinbutton"class="btn btn-sm btn-success" href="/Group/Join/@Model.GroupId">Join Group</a>
        } else
        {
            <a id ="leavebutton"class="btn btn-sm btn-warning" href="/Group/Leave/@Model.GroupId">Leave Group</a>
        }

    </div>
</div>
@section scripts {
    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.2.2.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <!--SignalR script to update the chat page and send messages.-->
    <script>
        $(function () {
            // Reference the auto-generated proxy for the hub.
            var chat = $.connection.chatHub;
            $.connection.hub.start().done(function () {
                $('#joinbutton').click(function () {
                    chat.server.addToRoom(@Model.GroupId);
                });
                $('#leavebutton').click(function () {
                    chat.server.removeFromRoom(@Model.GroupId);
                });
            });
        });
        // This optional function html-encodes messages for display in the page.
    </script>
}
